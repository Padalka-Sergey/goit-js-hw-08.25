{"version":3,"file":"03-feedback.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nconst formRef = document.querySelector('.feedback-form');\n\nconst data = {};\nconst KEYSTORAGE = 'feedback-form-state';\nconst savedData = localStorage.getItem(KEYSTORAGE);\n\npopulateTextStart();\n\nformRef.addEventListener('input', throttle(inputSaveStorage, 500));\nformRef.addEventListener('submit', submitForm);\n\nfunction inputSaveStorage(evt) {\n  data[evt.target.name] = evt.target.value;\n\n  onInputEmptyData('email');\n  onInputEmptyData('message');\n\n  const dataJson = JSON.stringify(data);\n  localStorage.setItem(KEYSTORAGE, dataJson);\n}\n\nfunction submitForm(evt) {\n  evt.preventDefault();\n  const savedData = localStorage.getItem(KEYSTORAGE);\n  if (savedData) {\n    const parsedData = JSON.parse(savedData);\n    console.log(parsedData);\n  }\n\n  evt.currentTarget.reset();\n  localStorage.removeItem(KEYSTORAGE);\n}\n\nfunction onInputEmptyData(param) {\n  if (!data[param]) {\n    data[param] = formRef.elements[param].value;\n  }\n}\n\nfunction populateTextStart() {\n  if (savedData) {\n    const parsedData = JSON.parse(savedData);\n\n    formRef.elements.email.value = parsedData.email;\n    formRef.elements.message.value = parsedData.message;\n  }\n}\n"],"names":["formRef","data","KEYSTORAGE","savedData","populateTextStart","throttle","inputSaveStorage","submitForm","evt","onInputEmptyData","dataJson","parsedData","param"],"mappings":"wIACA,MAAMA,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAO,CAAA,EACPC,EAAa,sBACbC,EAAY,aAAa,QAAQD,CAAU,EAEjDE,IAEAJ,EAAQ,iBAAiB,QAASK,EAASC,EAAkB,GAAG,CAAC,EACjEN,EAAQ,iBAAiB,SAAUO,CAAU,EAE7C,SAASD,EAAiBE,EAAK,CAC7BP,EAAKO,EAAI,OAAO,IAAI,EAAIA,EAAI,OAAO,MAEnCC,EAAiB,OAAO,EACxBA,EAAiB,SAAS,EAE1B,MAAMC,EAAW,KAAK,UAAUT,CAAI,EACpC,aAAa,QAAQC,EAAYQ,CAAQ,CAC3C,CAEA,SAASH,EAAWC,EAAK,CACvBA,EAAI,eAAc,EAClB,MAAML,EAAY,aAAa,QAAQD,CAAU,EACjD,GAAIC,EAAW,CACb,MAAMQ,EAAa,KAAK,MAAMR,CAAS,EACvC,QAAQ,IAAIQ,CAAU,CACvB,CAEDH,EAAI,cAAc,QAClB,aAAa,WAAWN,CAAU,CACpC,CAEA,SAASO,EAAiBG,EAAO,CAC1BX,EAAKW,CAAK,IACbX,EAAKW,CAAK,EAAIZ,EAAQ,SAASY,CAAK,EAAE,MAE1C,CAEA,SAASR,GAAoB,CAC3B,GAAID,EAAW,CACb,MAAMQ,EAAa,KAAK,MAAMR,CAAS,EAEvCH,EAAQ,SAAS,MAAM,MAAQW,EAAW,MAC1CX,EAAQ,SAAS,QAAQ,MAAQW,EAAW,OAC7C,CACH"}