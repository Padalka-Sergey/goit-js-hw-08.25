{"version":3,"file":"03-feedback.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nconst formRef = document.querySelector('.feedback-form');\n\nconst data = {};\nconst KEYSTORAGE = 'feedback-form-state';\nconst savedData = localStorage.getItem(KEYSTORAGE);\n\nif (savedData) {\n  const parsedData = JSON.parse(savedData);\n\n  formRef.elements.email.value = parsedData.email;\n  formRef.elements.message.value = parsedData.message;\n} else {\n  formRef.elements.email.value = '';\n  formRef.elements.message.value = '';\n}\n\nformRef.addEventListener('input', throttle(inputSaveStorage, 500));\nformRef.addEventListener('submit', submitForm);\n\nfunction inputSaveStorage(evt) {\n  if ('email' === evt.target.name) {\n    data.email = evt.target.value;\n  }\n  if (!data.email) {\n    data.email = formRef.elements.email.value;\n  }\n  if ('message' === evt.target.name) {\n    data.message = evt.target.value;\n  }\n  if (!data.message) {\n    data.message = formRef.elements.message.value;\n  }\n\n  const dataJson = JSON.stringify(data);\n\n  localStorage.setItem(KEYSTORAGE, dataJson);\n}\n\nfunction submitForm(evt) {\n  evt.preventDefault();\n  const savedData = localStorage.getItem(KEYSTORAGE);\n  if (savedData) {\n    const parsedData = JSON.parse(savedData);\n    console.log(parsedData);\n  }\n  formRef.elements.email.value = '';\n  formRef.elements.message.value = '';\n  localStorage.removeItem(KEYSTORAGE);\n}\n"],"names":["formRef","data","KEYSTORAGE","savedData","parsedData","throttle","inputSaveStorage","submitForm","evt","dataJson"],"mappings":"wIACA,MAAMA,EAAU,SAAS,cAAc,gBAAgB,EAEjDC,EAAO,CAAA,EACPC,EAAa,sBACbC,EAAY,aAAa,QAAQD,CAAU,EAEjD,GAAIC,EAAW,CACb,MAAMC,EAAa,KAAK,MAAMD,CAAS,EAEvCH,EAAQ,SAAS,MAAM,MAAQI,EAAW,MAC1CJ,EAAQ,SAAS,QAAQ,MAAQI,EAAW,OAC9C,MACEJ,EAAQ,SAAS,MAAM,MAAQ,GAC/BA,EAAQ,SAAS,QAAQ,MAAQ,GAGnCA,EAAQ,iBAAiB,QAASK,EAASC,EAAkB,GAAG,CAAC,EACjEN,EAAQ,iBAAiB,SAAUO,CAAU,EAE7C,SAASD,EAAiBE,EAAK,CACbA,EAAI,OAAO,OAAvB,UACFP,EAAK,MAAQO,EAAI,OAAO,OAErBP,EAAK,QACRA,EAAK,MAAQD,EAAQ,SAAS,MAAM,OAEpBQ,EAAI,OAAO,OAAzB,YACFP,EAAK,QAAUO,EAAI,OAAO,OAEvBP,EAAK,UACRA,EAAK,QAAUD,EAAQ,SAAS,QAAQ,OAG1C,MAAMS,EAAW,KAAK,UAAUR,CAAI,EAEpC,aAAa,QAAQC,EAAYO,CAAQ,CAC3C,CAEA,SAASF,EAAWC,EAAK,CACvBA,EAAI,eAAc,EAClB,MAAML,EAAY,aAAa,QAAQD,CAAU,EACjD,GAAIC,EAAW,CACb,MAAMC,EAAa,KAAK,MAAMD,CAAS,EACvC,QAAQ,IAAIC,CAAU,CACvB,CACDJ,EAAQ,SAAS,MAAM,MAAQ,GAC/BA,EAAQ,SAAS,QAAQ,MAAQ,GACjC,aAAa,WAAWE,CAAU,CACpC"}